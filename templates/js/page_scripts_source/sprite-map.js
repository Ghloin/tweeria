
var mapSpritesAr = [
    {"pos":{"top":0, "left":0}, "src":"/style/img/global-map/map_1.jpg", "count":0},
    {"pos":{"top":0, "left":321}, "src":"/style/img/global-map/map_2.jpg", "count":1},
    {"pos":{"top":0, "left":642}, "src":"/style/img/global-map/map_3.jpg", "count":2},
    {"pos":{"top":0, "left":963}, "src":"/style/img/global-map/map_4.jpg", "count":3},
    {"pos":{"top":0, "left":1284}, "src":"/style/img/global-map/map_5.jpg", "count":4},
    {"pos":{"top":0, "left":1605}, "src":"/style/img/global-map/map_6.jpg", "count":5},
    {"pos":{"top":0, "left":1926}, "src":"/style/img/global-map/map_7.jpg", "count":6},
    {"pos":{"top":0, "left":2247}, "src":"/style/img/global-map/map_8.jpg", "count":7},
    {"pos":{"top":0, "left":2568}, "src":"/style/img/global-map/map_9.jpg", "count":8},
    {"pos":{"top":363, "left":0}, "src":"/style/img/global-map/map_10.jpg", "count":9},
    {"pos":{"top":363, "left":321}, "src":"/style/img/global-map/map_11.jpg", "count":10},
    {"pos":{"top":363, "left":642}, "src":"/style/img/global-map/map_12.jpg", "count":11},
    {"pos":{"top":363, "left":963}, "src":"/style/img/global-map/map_13.jpg", "count":12},
    {"pos":{"top":363, "left":1284}, "src":"/style/img/global-map/map_14.jpg", "count":13},
    {"pos":{"top":363, "left":1605}, "src":"/style/img/global-map/map_15.jpg", "count":14},
    {"pos":{"top":363, "left":1926}, "src":"/style/img/global-map/map_16.jpg", "count":15},
    {"pos":{"top":363, "left":2247}, "src":"/style/img/global-map/map_17.jpg", "count":16},
    {"pos":{"top":363, "left":2568}, "src":"/style/img/global-map/map_18.jpg", "count":17},
    {"pos":{"top":726, "left":0}, "src":"/style/img/global-map/map_19.jpg", "count":18},
    {"pos":{"top":726, "left":321}, "src":"/style/img/global-map/map_20.jpg", "count":19},
    {"pos":{"top":726, "left":642}, "src":"/style/img/global-map/map_21.jpg", "count":20},
    {"pos":{"top":726, "left":963}, "src":"/style/img/global-map/map_22.jpg", "count":21},
    {"pos":{"top":726, "left":1284}, "src":"/style/img/global-map/map_23.jpg", "count":22},
    {"pos":{"top":726, "left":1605}, "src":"/style/img/global-map/map_24.jpg", "count":23},
    {"pos":{"top":726, "left":1926}, "src":"/style/img/global-map/map_25.jpg", "count":24},
    {"pos":{"top":726, "left":2247}, "src":"/style/img/global-map/map_26.jpg", "count":25},
    {"pos":{"top":726, "left":2568}, "src":"/style/img/global-map/map_27.jpg", "count":26},
    {"pos":{"top":1089, "left":0}, "src":"/style/img/global-map/map_28.jpg", "count":27},
    {"pos":{"top":1089, "left":321}, "src":"/style/img/global-map/map_29.jpg", "count":28},
    {"pos":{"top":1089, "left":642}, "src":"/style/img/global-map/map_30.jpg", "count":29},
    {"pos":{"top":1089, "left":963}, "src":"/style/img/global-map/map_31.jpg", "count":30},
    {"pos":{"top":1089, "left":1284}, "src":"/style/img/global-map/map_32.jpg", "count":31},
    {"pos":{"top":1089, "left":1605}, "src":"/style/img/global-map/map_33.jpg", "count":32},
    {"pos":{"top":1089, "left":1926}, "src":"/style/img/global-map/map_34.jpg", "count":33},
    {"pos":{"top":1089, "left":2247}, "src":"/style/img/global-map/map_35.jpg", "count":34},
    {"pos":{"top":1089, "left":2568}, "src":"/style/img/global-map/map_36.jpg", "count":35},
    {"pos":{"top":1452, "left":0}, "src":"/style/img/global-map/map_37.jpg", "count":36},
    {"pos":{"top":1452, "left":321}, "src":"/style/img/global-map/map_38.jpg", "count":37},
    {"pos":{"top":1452, "left":642}, "src":"/style/img/global-map/map_39.jpg", "count":38},
    {"pos":{"top":1452, "left":963}, "src":"/style/img/global-map/map_40.jpg", "count":39},
    {"pos":{"top":1452, "left":1284}, "src":"/style/img/global-map/map_41.jpg", "count":40},
    {"pos":{"top":1452, "left":1605}, "src":"/style/img/global-map/map_42.jpg", "count":41},
    {"pos":{"top":1452, "left":1926}, "src":"/style/img/global-map/map_43.jpg", "count":42},
    {"pos":{"top":1452, "left":2247}, "src":"/style/img/global-map/map_44.jpg", "count":43},
    {"pos":{"top":1452, "left":2568}, "src":"/style/img/global-map/map_45.jpg", "count":44},
    {"pos":{"top":1815, "left":0}, "src":"/style/img/global-map/map_46.jpg", "count":45},
    {"pos":{"top":1815, "left":321}, "src":"/style/img/global-map/map_47.jpg", "count":46},
    {"pos":{"top":1815, "left":642}, "src":"/style/img/global-map/map_48.jpg", "count":47},
    {"pos":{"top":1815, "left":963}, "src":"/style/img/global-map/map_49.jpg", "count":48},
    {"pos":{"top":1815, "left":1284}, "src":"/style/img/global-map/map_50.jpg", "count":49},
    {"pos":{"top":1815, "left":1605}, "src":"/style/img/global-map/map_51.jpg", "count":50},
    {"pos":{"top":1815, "left":1926}, "src":"/style/img/global-map/map_52.jpg", "count":51},
    {"pos":{"top":1815, "left":2247}, "src":"/style/img/global-map/map_53.jpg", "count":52},
    {"pos":{"top":1815, "left":2568}, "src":"/style/img/global-map/map_54.jpg", "count":53},
    {"pos":{"top":2178, "left":0}, "src":"/style/img/global-map/map_55.jpg", "count":54},
    {"pos":{"top":2178, "left":321}, "src":"/style/img/global-map/map_56.jpg", "count":55},
    {"pos":{"top":2178, "left":642}, "src":"/style/img/global-map/map_57.jpg", "count":56},
    {"pos":{"top":2178, "left":963}, "src":"/style/img/global-map/map_58.jpg", "count":57},
    {"pos":{"top":2178, "left":1284}, "src":"/style/img/global-map/map_59.jpg", "count":58},
    {"pos":{"top":2178, "left":1605}, "src":"/style/img/global-map/map_60.jpg", "count":59},
    {"pos":{"top":2178, "left":1926}, "src":"/style/img/global-map/map_61.jpg", "count":60},
    {"pos":{"top":2178, "left":2247}, "src":"/style/img/global-map/map_62.jpg", "count":61},
    {"pos":{"top":2178, "left":2568}, "src":"/style/img/global-map/map_63.jpg", "count":62}
];

var mapSpritesObj = {
    "0":{"pos":{"top":0, "left":0}, "src":"/style/img/global-map/map_1.jpg", "count":0},
    "1":{"pos":{"top":0, "left":321}, "src":"/style/img/global-map/map_2.jpg", "count":1},
    "2":{"pos":{"top":0, "left":642}, "src":"/style/img/global-map/map_3.jpg", "count":2},
    "3":{"pos":{"top":0, "left":963}, "src":"/style/img/global-map/map_4.jpg", "count":3},
    "4":{"pos":{"top":0, "left":1284}, "src":"/style/img/global-map/map_5.jpg", "count":4},
    "5":{"pos":{"top":0, "left":1605}, "src":"/style/img/global-map/map_6.jpg", "count":5},
    "6":{"pos":{"top":0, "left":1926}, "src":"/style/img/global-map/map_7.jpg", "count":6},
    "7":{"pos":{"top":0, "left":2247}, "src":"/style/img/global-map/map_8.jpg", "count":7},
    "8":{"pos":{"top":0, "left":2568}, "src":"/style/img/global-map/map_9.jpg", "count":8},
    "9":{"pos":{"top":363, "left":0}, "src":"/style/img/global-map/map_10.jpg", "count":9},
    "10":{"pos":{"top":363, "left":321}, "src":"/style/img/global-map/map_11.jpg", "count":10},
    "11":{"pos":{"top":363, "left":642}, "src":"/style/img/global-map/map_12.jpg", "count":11},
    "12":{"pos":{"top":363, "left":963}, "src":"/style/img/global-map/map_13.jpg", "count":12},
    "13":{"pos":{"top":363, "left":1284}, "src":"/style/img/global-map/map_14.jpg", "count":13},
    "14":{"pos":{"top":363, "left":1605}, "src":"/style/img/global-map/map_15.jpg", "count":14},
    "15":{"pos":{"top":363, "left":1926}, "src":"/style/img/global-map/map_16.jpg", "count":15},
    "16":{"pos":{"top":363, "left":2247}, "src":"/style/img/global-map/map_17.jpg", "count":16},
    "17":{"pos":{"top":363, "left":2568}, "src":"/style/img/global-map/map_18.jpg", "count":17},
    "18":{"pos":{"top":726, "left":0}, "src":"/style/img/global-map/map_19.jpg", "count":18},
    "19":{"pos":{"top":726, "left":321}, "src":"/style/img/global-map/map_20.jpg", "count":19},
    "20":{"pos":{"top":726, "left":642}, "src":"/style/img/global-map/map_21.jpg", "count":20},
    "21":{"pos":{"top":726, "left":963}, "src":"/style/img/global-map/map_22.jpg", "count":21},
    "22":{"pos":{"top":726, "left":1284}, "src":"/style/img/global-map/map_23.jpg", "count":22},
    "23":{"pos":{"top":726, "left":1605}, "src":"/style/img/global-map/map_24.jpg", "count":23},
    "24":{"pos":{"top":726, "left":1926}, "src":"/style/img/global-map/map_25.jpg", "count":24},
    "25":{"pos":{"top":726, "left":2247}, "src":"/style/img/global-map/map_26.jpg", "count":25},
    "26":{"pos":{"top":726, "left":2568}, "src":"/style/img/global-map/map_27.jpg", "count":26},
    "27":{"pos":{"top":1089, "left":0}, "src":"/style/img/global-map/map_28.jpg", "count":27},
    "28":{"pos":{"top":1089, "left":321}, "src":"/style/img/global-map/map_29.jpg", "count":28},
    "29":{"pos":{"top":1089, "left":642}, "src":"/style/img/global-map/map_30.jpg", "count":29},
    "30":{"pos":{"top":1089, "left":963}, "src":"/style/img/global-map/map_31.jpg", "count":30},
    "31":{"pos":{"top":1089, "left":1284}, "src":"/style/img/global-map/map_32.jpg", "count":31},
    "32":{"pos":{"top":1089, "left":1605}, "src":"/style/img/global-map/map_33.jpg", "count":32},
    "33":{"pos":{"top":1089, "left":1926}, "src":"/style/img/global-map/map_34.jpg", "count":33},
    "34":{"pos":{"top":1089, "left":2247}, "src":"/style/img/global-map/map_35.jpg", "count":34},
    "35":{"pos":{"top":1089, "left":2568}, "src":"/style/img/global-map/map_36.jpg", "count":35},
    "36":{"pos":{"top":1452, "left":0}, "src":"/style/img/global-map/map_37.jpg", "count":36},
    "37":{"pos":{"top":1452, "left":321}, "src":"/style/img/global-map/map_38.jpg", "count":37},
    "38":{"pos":{"top":1452, "left":642}, "src":"/style/img/global-map/map_39.jpg", "count":38},
    "39":{"pos":{"top":1452, "left":963}, "src":"/style/img/global-map/map_40.jpg", "count":39},
    "40":{"pos":{"top":1452, "left":1284}, "src":"/style/img/global-map/map_41.jpg", "count":40},
    "41":{"pos":{"top":1452, "left":1605}, "src":"/style/img/global-map/map_42.jpg", "count":41},
    "42":{"pos":{"top":1452, "left":1926}, "src":"/style/img/global-map/map_43.jpg", "count":42},
    "43":{"pos":{"top":1452, "left":2247}, "src":"/style/img/global-map/map_44.jpg", "count":43},
    "44":{"pos":{"top":1452, "left":2568}, "src":"/style/img/global-map/map_45.jpg", "count":44},
    "45":{"pos":{"top":1815, "left":0}, "src":"/style/img/global-map/map_46.jpg", "count":45},
    "46":{"pos":{"top":1815, "left":321}, "src":"/style/img/global-map/map_47.jpg", "count":46},
    "47":{"pos":{"top":1815, "left":642}, "src":"/style/img/global-map/map_48.jpg", "count":47},
    "48":{"pos":{"top":1815, "left":963}, "src":"/style/img/global-map/map_49.jpg", "count":48},
    "49":{"pos":{"top":1815, "left":1284}, "src":"/style/img/global-map/map_50.jpg", "count":49},
    "50":{"pos":{"top":1815, "left":1605}, "src":"/style/img/global-map/map_51.jpg", "count":50},
    "51":{"pos":{"top":1815, "left":1926}, "src":"/style/img/global-map/map_52.jpg", "count":51},
    "52":{"pos":{"top":1815, "left":2247}, "src":"/style/img/global-map/map_53.jpg", "count":52},
    "53":{"pos":{"top":1815, "left":2568}, "src":"/style/img/global-map/map_54.jpg", "count":53},
    "54":{"pos":{"top":2178, "left":0}, "src":"/style/img/global-map/map_55.jpg", "count":54},
    "55":{"pos":{"top":2178, "left":321}, "src":"/style/img/global-map/map_56.jpg", "count":55},
    "56":{"pos":{"top":2178, "left":642}, "src":"/style/img/global-map/map_57.jpg", "count":56},
    "57":{"pos":{"top":2178, "left":963}, "src":"/style/img/global-map/map_58.jpg", "count":57},
    "58":{"pos":{"top":2178, "left":1284}, "src":"/style/img/global-map/map_59.jpg", "count":58},
    "59":{"pos":{"top":2178, "left":1605}, "src":"/style/img/global-map/map_60.jpg", "count":59},
    "60":{"pos":{"top":2178, "left":1926}, "src":"/style/img/global-map/map_61.jpg", "count":60},
    "61":{"pos":{"top":2178, "left":2247}, "src":"/style/img/global-map/map_62.jpg", "count":61},
    "62":{"pos":{"top":2178, "left":2568}, "src":"/style/img/global-map/map_63.jpg", "count":62}
}

var mapNewArray = [
    {"pos":{"top":0, "left":0}, "src":"/style/img/global-map/map_01.jpg", "count":0},
    {"pos":{"top":0, "left":241}, "src":"/style/img/global-map/map_02.jpg", "count":1},
    {"pos":{"top":0, "left":483}, "src":"/style/img/global-map/map_03.jpg", "count":2},
    {"pos":{"top":0, "left":724}, "src":"/style/img/global-map/map_04.jpg", "count":3},
    {"pos":{"top":0, "left":965}, "src":"/style/img/global-map/map_05.jpg", "count":4},
    {"pos":{"top":0, "left":1207}, "src":"/style/img/global-map/map_06.jpg", "count":5},
    {"pos":{"top":0, "left":1448}, "src":"/style/img/global-map/map_07.jpg", "count":6},
    {"pos":{"top":0, "left":1689}, "src":"/style/img/global-map/map_08.jpg", "count":7},
    {"pos":{"top":0, "left":1931}, "src":"/style/img/global-map/map_09.jpg", "count":8},
    {"pos":{"top":224, "left":0}, "src":"/style/img/global-map/map_10.jpg", "count":9},
    {"pos":{"top":224, "left":241}, "src":"/style/img/global-map/map_11.jpg", "count":10},
    {"pos":{"top":224, "left":483}, "src":"/style/img/global-map/map_12.jpg", "count":11},
    {"pos":{"top":224, "left":724}, "src":"/style/img/global-map/map_13.jpg", "count":12},
    {"pos":{"top":224, "left":965}, "src":"/style/img/global-map/map_14.jpg", "count":13},
    {"pos":{"top":224, "left":1207}, "src":"/style/img/global-map/map_15.jpg", "count":14},
    {"pos":{"top":224, "left":1448}, "src":"/style/img/global-map/map_16.jpg", "count":15},
    {"pos":{"top":224, "left":1689}, "src":"/style/img/global-map/map_17.jpg", "count":16},
    {"pos":{"top":224, "left":1931}, "src":"/style/img/global-map/map_18.jpg", "count":17},
    {"pos":{"top":449, "left":0}, "src":"/style/img/global-map/map_19.jpg", "count":18},
    {"pos":{"top":449, "left":241}, "src":"/style/img/global-map/map_20.jpg", "count":19},
    {"pos":{"top":449, "left":483}, "src":"/style/img/global-map/map_21.jpg", "count":20},
    {"pos":{"top":449, "left":724}, "src":"/style/img/global-map/map_22.jpg", "count":21},
    {"pos":{"top":449, "left":965}, "src":"/style/img/global-map/map_23.jpg", "count":22},
    {"pos":{"top":449, "left":1207}, "src":"/style/img/global-map/map_24.jpg", "count":23},
    {"pos":{"top":449, "left":1448}, "src":"/style/img/global-map/map_25.jpg", "count":24},
    {"pos":{"top":449, "left":1689}, "src":"/style/img/global-map/map_26.jpg", "count":25},
    {"pos":{"top":449, "left":1931}, "src":"/style/img/global-map/map_27.jpg", "count":26},
    {"pos":{"top":673, "left":0}, "src":"/style/img/global-map/map_28.jpg", "count":27},
    {"pos":{"top":673, "left":241}, "src":"/style/img/global-map/map_29.jpg", "count":28},
    {"pos":{"top":673, "left":483}, "src":"/style/img/global-map/map_30.jpg", "count":29},
    {"pos":{"top":673, "left":724}, "src":"/style/img/global-map/map_31.jpg", "count":30},
    {"pos":{"top":673, "left":965}, "src":"/style/img/global-map/map_32.jpg", "count":31},
    {"pos":{"top":673, "left":1207}, "src":"/style/img/global-map/map_33.jpg", "count":32},
    {"pos":{"top":673, "left":1448}, "src":"/style/img/global-map/map_34.jpg", "count":33},
    {"pos":{"top":673, "left":1689}, "src":"/style/img/global-map/map_35.jpg", "count":34},
    {"pos":{"top":673, "left":1931}, "src":"/style/img/global-map/map_36.jpg", "count":35},
    {"pos":{"top":898, "left":0}, "src":"/style/img/global-map/map_37.jpg", "count":36},
    {"pos":{"top":898, "left":241}, "src":"/style/img/global-map/map_38.jpg", "count":37},
    {"pos":{"top":898, "left":483}, "src":"/style/img/global-map/map_39.jpg", "count":38},
    {"pos":{"top":898, "left":724}, "src":"/style/img/global-map/map_40.jpg", "count":39},
    {"pos":{"top":898, "left":965}, "src":"/style/img/global-map/map_41.jpg", "count":40},
    {"pos":{"top":898, "left":1207}, "src":"/style/img/global-map/map_42.jpg", "count":41},
    {"pos":{"top":898, "left":1448}, "src":"/style/img/global-map/map_43.jpg", "count":42},
    {"pos":{"top":898, "left":1689}, "src":"/style/img/global-map/map_44.jpg", "count":43},
    {"pos":{"top":898, "left":1931}, "src":"/style/img/global-map/map_45.jpg", "count":44},
    {"pos":{"top":1122, "left":0}, "src":"/style/img/global-map/map_46.jpg", "count":45},
    {"pos":{"top":1122, "left":241}, "src":"/style/img/global-map/map_47.jpg", "count":46},
    {"pos":{"top":1122, "left":483}, "src":"/style/img/global-map/map_48.jpg", "count":47},
    {"pos":{"top":1122, "left":724}, "src":"/style/img/global-map/map_49.jpg", "count":48},
    {"pos":{"top":1122, "left":965}, "src":"/style/img/global-map/map_50.jpg", "count":49},
    {"pos":{"top":1122, "left":1207}, "src":"/style/img/global-map/map_51.jpg", "count":50},
    {"pos":{"top":1122, "left":1448}, "src":"/style/img/global-map/map_52.jpg", "count":51},
    {"pos":{"top":1122, "left":1689}, "src":"/style/img/global-map/map_53.jpg", "count":52},
    {"pos":{"top":1122, "left":1931}, "src":"/style/img/global-map/map_54.jpg", "count":53},
    {"pos":{"top":1347, "left":0}, "src":"/style/img/global-map/map_55.jpg", "count":54},
    {"pos":{"top":1347, "left":241}, "src":"/style/img/global-map/map_56.jpg", "count":55},
    {"pos":{"top":1347, "left":483}, "src":"/style/img/global-map/map_57.jpg", "count":56},
    {"pos":{"top":1347, "left":724}, "src":"/style/img/global-map/map_58.jpg", "count":57},
    {"pos":{"top":1347, "left":965}, "src":"/style/img/global-map/map_59.jpg", "count":58},
    {"pos":{"top":1347, "left":1207}, "src":"/style/img/global-map/map_60.jpg", "count":59},
    {"pos":{"top":1347, "left":1448}, "src":"/style/img/global-map/map_61.jpg", "count":60},
    {"pos":{"top":1347, "left":1689}, "src":"/style/img/global-map/map_62.jpg", "count":61},
    {"pos":{"top":1347, "left":1931}, "src":"/style/img/global-map/map_63.jpg", "count":62},
    {"pos":{"top":1571, "left":0}, "src":"/style/img/global-map/map_64.jpg", "count":63},
    {"pos":{"top":1571, "left":241}, "src":"/style/img/global-map/map_65.jpg", "count":64},
    {"pos":{"top":1571, "left":483}, "src":"/style/img/global-map/map_66.jpg", "count":65},
    {"pos":{"top":1571, "left":724}, "src":"/style/img/global-map/map_67.jpg", "count":66},
    {"pos":{"top":1571, "left":965}, "src":"/style/img/global-map/map_68.jpg", "count":67},
    {"pos":{"top":1571, "left":1207}, "src":"/style/img/global-map/map_69.jpg", "count":68},
    {"pos":{"top":1571, "left":1448}, "src":"/style/img/global-map/map_70.jpg", "count":69},
    {"pos":{"top":1571, "left":1689}, "src":"/style/img/global-map/map_71.jpg", "count":70},
    {"pos":{"top":1571, "left":1931}, "src":"/style/img/global-map/map_72.jpg", "count":71},
    {"pos":{"top":1796, "left":0}, "src":"/style/img/global-map/map_73.jpg", "count":72},
    {"pos":{"top":1796, "left":241}, "src":"/style/img/global-map/map_74.jpg", "count":73},
    {"pos":{"top":1796, "left":483}, "src":"/style/img/global-map/map_75.jpg", "count":74},
    {"pos":{"top":1796, "left":724}, "src":"/style/img/global-map/map_76.jpg", "count":75},
    {"pos":{"top":1796, "left":965}, "src":"/style/img/global-map/map_77.jpg", "count":76},
    {"pos":{"top":1796, "left":1207}, "src":"/style/img/global-map/map_78.jpg", "count":77},
    {"pos":{"top":1796, "left":1448}, "src":"/style/img/global-map/map_79.jpg", "count":78},
    {"pos":{"top":1796, "left":1689}, "src":"/style/img/global-map/map_80.jpg", "count":79},
    {"pos":{"top":1796, "left":1931}, "src":"/style/img/global-map/map_81.jpg", "count":80}
];

var mapNewObj = {
    "0":{
        "pos":{
            "top":0,
            "left":0
        },
        "src":"/style/img/global-map/map_1.jpg",
        "count":0
    },
    "1":{
        "pos":{
            "top":0,
            "left":321
        },
        "src":"/style/img/global-map/map_2.jpg",
        "count":1
    },
    "2":{
        "pos":{
            "top":0,
            "left":642
        },
        "src":"/style/img/global-map/map_3.jpg",
        "count":2
    },
    "3":{
        "pos":{
            "top":0,
            "left":963
        },
        "src":"/style/img/global-map/map_4.jpg",
        "count":3
    },
    "4":{
        "pos":{
            "top":0,
            "left":1284
        },
        "src":"/style/img/global-map/map_5.jpg",
        "count":4
    },
    "5":{
        "pos":{
            "top":0,
            "left":1605
        },
        "src":"/style/img/global-map/map_6.jpg",
        "count":5
    },
    "6":{
        "pos":{
            "top":0,
            "left":1926
        },
        "src":"/style/img/global-map/map_7.jpg",
        "count":6
    },
    "7":{
        "pos":{
            "top":0,
            "left":2247
        },
        "src":"/style/img/global-map/map_8.jpg",
        "count":7
    },
    "8":{
        "pos":{
            "top":0,
            "left":2568
        },
        "src":"/style/img/global-map/map_9.jpg",
        "count":8
    },
    "9":{
        "pos":{
            "top":363,
            "left":0
        },
        "src":"/style/img/global-map/map_10.jpg",
        "count":9
    },
    "10":{
        "pos":{
            "top":363,
            "left":321
        },
        "src":"/style/img/global-map/map_11.jpg",
        "count":10
    },
    "11":{
        "pos":{
            "top":363,
            "left":642
        },
        "src":"/style/img/global-map/map_12.jpg",
        "count":11
    },
    "12":{
        "pos":{
            "top":363,
            "left":963
        },
        "src":"/style/img/global-map/map_13.jpg",
        "count":12
    },
    "13":{
        "pos":{
            "top":363,
            "left":1284
        },
        "src":"/style/img/global-map/map_14.jpg",
        "count":13
    },
    "14":{
        "pos":{
            "top":363,
            "left":1605
        },
        "src":"/style/img/global-map/map_15.jpg",
        "count":14
    },
    "15":{
        "pos":{
            "top":363,
            "left":1926
        },
        "src":"/style/img/global-map/map_16.jpg",
        "count":15
    },
    "16":{
        "pos":{
            "top":363,
            "left":2247
        },
        "src":"/style/img/global-map/map_17.jpg",
        "count":16
    },
    "17":{
        "pos":{
            "top":363,
            "left":2568
        },
        "src":"/style/img/global-map/map_18.jpg",
        "count":17
    },
    "18":{
        "pos":{
            "top":726,
            "left":0
        },
        "src":"/style/img/global-map/map_19.jpg",
        "count":18
    },
    "19":{
        "pos":{
            "top":726,
            "left":321
        },
        "src":"/style/img/global-map/map_20.jpg",
        "count":19
    },
    "20":{
        "pos":{
            "top":726,
            "left":642
        },
        "src":"/style/img/global-map/map_21.jpg",
        "count":20
    },
    "21":{
        "pos":{
            "top":726,
            "left":963
        },
        "src":"/style/img/global-map/map_22.jpg",
        "count":21
    },
    "22":{
        "pos":{
            "top":726,
            "left":1284
        },
        "src":"/style/img/global-map/map_23.jpg",
        "count":22
    },
    "23":{
        "pos":{
            "top":726,
            "left":1605
        },
        "src":"/style/img/global-map/map_24.jpg",
        "count":23
    },
    "24":{
        "pos":{
            "top":726,
            "left":1926
        },
        "src":"/style/img/global-map/map_25.jpg",
        "count":24
    },
    "25":{
        "pos":{
            "top":726,
            "left":2247
        },
        "src":"/style/img/global-map/map_26.jpg",
        "count":25
    },
    "26":{
        "pos":{
            "top":726,
            "left":2568
        },
        "src":"/style/img/global-map/map_27.jpg",
        "count":26
    },
    "27":{
        "pos":{
            "top":1089,
            "left":0
        },
        "src":"/style/img/global-map/map_28.jpg",
        "count":27
    },
    "28":{
        "pos":{
            "top":1089,
            "left":321
        },
        "src":"/style/img/global-map/map_29.jpg",
        "count":28
    },
    "29":{
        "pos":{
            "top":1089,
            "left":642
        },
        "src":"/style/img/global-map/map_30.jpg",
        "count":29
    },
    "30":{
        "pos":{
            "top":1089,
            "left":963
        },
        "src":"/style/img/global-map/map_31.jpg",
        "count":30
    },
    "31":{
        "pos":{
            "top":1089,
            "left":1284
        },
        "src":"/style/img/global-map/map_32.jpg",
        "count":31
    },
    "32":{
        "pos":{
            "top":1089,
            "left":1605
        },
        "src":"/style/img/global-map/map_33.jpg",
        "count":32
    },
    "33":{
        "pos":{
            "top":1089,
            "left":1926
        },
        "src":"/style/img/global-map/map_34.jpg",
        "count":33
    },
    "34":{
        "pos":{
            "top":1089,
            "left":2247
        },
        "src":"/style/img/global-map/map_35.jpg",
        "count":34
    },
    "35":{
        "pos":{
            "top":1089,
            "left":2568
        },
        "src":"/style/img/global-map/map_36.jpg",
        "count":35
    },
    "36":{
        "pos":{
            "top":1452,
            "left":0
        },
        "src":"/style/img/global-map/map_37.jpg",
        "count":36
    },
    "37":{
        "pos":{
            "top":1452,
            "left":321
        },
        "src":"/style/img/global-map/map_38.jpg",
        "count":37
    },
    "38":{
        "pos":{
            "top":1452,
            "left":642
        },
        "src":"/style/img/global-map/map_39.jpg",
        "count":38
    },
    "39":{
        "pos":{
            "top":1452,
            "left":963
        },
        "src":"/style/img/global-map/map_40.jpg",
        "count":39
    },
    "40":{
        "pos":{
            "top":1452,
            "left":1284
        },
        "src":"/style/img/global-map/map_41.jpg",
        "count":40
    },
    "41":{
        "pos":{
            "top":1452,
            "left":1605
        },
        "src":"/style/img/global-map/map_42.jpg",
        "count":41
    },
    "42":{
        "pos":{
            "top":1452,
            "left":1926
        },
        "src":"/style/img/global-map/map_43.jpg",
        "count":42
    },
    "43":{
        "pos":{
            "top":1452,
            "left":2247
        },
        "src":"/style/img/global-map/map_44.jpg",
        "count":43
    },
    "44":{
        "pos":{
            "top":1452,
            "left":2568
        },
        "src":"/style/img/global-map/map_45.jpg",
        "count":44
    },
    "45":{
        "pos":{
            "top":1815,
            "left":0
        },
        "src":"/style/img/global-map/map_46.jpg",
        "count":45
    },
    "46":{
        "pos":{
            "top":1815,
            "left":321
        },
        "src":"/style/img/global-map/map_47.jpg",
        "count":46
    },
    "47":{
        "pos":{
            "top":1815,
            "left":642
        },
        "src":"/style/img/global-map/map_48.jpg",
        "count":47
    },
    "48":{
        "pos":{
            "top":1815,
            "left":963
        },
        "src":"/style/img/global-map/map_49.jpg",
        "count":48
    },
    "49":{
        "pos":{
            "top":1815,
            "left":1284
        },
        "src":"/style/img/global-map/map_50.jpg",
        "count":49
    },
    "50":{
        "pos":{
            "top":1815,
            "left":1605
        },
        "src":"/style/img/global-map/map_51.jpg",
        "count":50
    },
    "51":{
        "pos":{
            "top":1815,
            "left":1926
        },
        "src":"/style/img/global-map/map_52.jpg",
        "count":51
    },
    "52":{
        "pos":{
            "top":1815,
            "left":2247
        },
        "src":"/style/img/global-map/map_53.jpg",
        "count":52
    },
    "53":{
        "pos":{
            "top":1815,
            "left":2568
        },
        "src":"/style/img/global-map/map_54.jpg",
        "count":53
    },
    "54":{
        "pos":{
            "top":2178,
            "left":0
        },
        "src":"/style/img/global-map/map_55.jpg",
        "count":54
    },
    "55":{
        "pos":{
            "top":2178,
            "left":321
        },
        "src":"/style/img/global-map/map_56.jpg",
        "count":55
    },
    "56":{
        "pos":{
            "top":2178,
            "left":642
        },
        "src":"/style/img/global-map/map_57.jpg",
        "count":56
    },
    "57":{
        "pos":{
            "top":2178,
            "left":963
        },
        "src":"/style/img/global-map/map_58.jpg",
        "count":57
    },
    "58":{
        "pos":{
            "top":2178,
            "left":1284
        },
        "src":"/style/img/global-map/map_59.jpg",
        "count":58
    },
    "59":{
        "pos":{
            "top":2178,
            "left":1605
        },
        "src":"/style/img/global-map/map_60.jpg",
        "count":59
    },
    "60":{
        "pos":{
            "top":2178,
            "left":1926
        },
        "src":"/style/img/global-map/map_61.jpg",
        "count":60
    },
    "61":{
        "pos":{
            "top":2178,
            "left":2247
        },
        "src":"/style/img/global-map/map_62.jpg",
        "count":61
    },
    "62":{
        "pos":{
            "top":2178,
            "left":2568
        },
        "src":"/style/img/global-map/map_63.jpg",
        "count":62
    },
    "63":{
        "pos":{
            "top":2541,
            "left":0
        },
        "src":"/style/img/global-map/map_64.jpg",
        "count":63
    },
    "64":{
        "pos":{
            "top":2541,
            "left":321
        },
        "src":"/style/img/global-map/map_65.jpg",
        "count":64
    },
    "65":{
        "pos":{
            "top":2541,
            "left":642
        },
        "src":"/style/img/global-map/map_66.jpg",
        "count":65
    },
    "66":{
        "pos":{
            "top":2541,
            "left":963
        },
        "src":"/style/img/global-map/map_67.jpg",
        "count":66
    },
    "67":{
        "pos":{
            "top":2541,
            "left":1284
        },
        "src":"/style/img/global-map/map_68.jpg",
        "count":67
    },
    "68":{
        "pos":{
            "top":2541,
            "left":1605
        },
        "src":"/style/img/global-map/map_69.jpg",
        "count":68
    },
    "69":{
        "pos":{
            "top":2541,
            "left":1926
        },
        "src":"/style/img/global-map/map_70.jpg",
        "count":69
    },
    "70":{
        "pos":{
            "top":2541,
            "left":2247
        },
        "src":"/style/img/global-map/map_71.jpg",
        "count":70
    },
    "71":{
        "pos":{
            "top":2541,
            "left":2568
        },
        "src":"/style/img/global-map/map_72.jpg",
        "count":71
    },
    "72":{
        "pos":{
            "top":2904,
            "left":0
        },
        "src":"/style/img/global-map/map_73.jpg",
        "count":72
    },
    "73":{
        "pos":{
            "top":2904,
            "left":321
        },
        "src":"/style/img/global-map/map_74.jpg",
        "count":73
    },
    "74":{
        "pos":{
            "top":2904,
            "left":642
        },
        "src":"/style/img/global-map/map_75.jpg",
        "count":74
    },
    "75":{
        "pos":{
            "top":2904,
            "left":963
        },
        "src":"/style/img/global-map/map_76.jpg",
        "count":75
    },
    "76":{
        "pos":{
            "top":2904,
            "left":1284
        },
        "src":"/style/img/global-map/map_77.jpg",
        "count":76
    },
    "77":{
        "pos":{
            "top":2904,
            "left":1605
        },
        "src":"/style/img/global-map/map_78.jpg",
        "count":77
    },
    "78":{
        "pos":{
            "top":2904,
            "left":1926
        },
        "src":"/style/img/global-map/map_79.jpg",
        "count":78
    },
    "79":{
        "pos":{
            "top":2904,
            "left":2247
        },
        "src":"/style/img/global-map/map_80.jpg",
        "count":79
    },
    "80":{
        "pos":{
            "top":2904,
            "left":2568
        },
        "src":"/style/img/global-map/map_81.jpg",
        "count":80
    }
};


$(function(){


    /*
     $(".global-map img").each(function(){
     var $this = $(this);
     $this.attr('src',$this.data("original"));
     });
     */
    $(".global-map").empty();
    /*$.imgpreload(mapSpritesAr,{
     each: function(){


     }
     });
     */

    if (typeof someMapData != "undefined"){
        var showAllMap = (someMapData.showAllMap==undefined) ? true : someMapData.showAllMap,
            $map = $("#map-sprite");
    /*,
            $player = $("<div />",{
                "class": "player-mark current-player-mark",
                "data": {
                    "name": someMapData.player.name,
                    "x": someMapData.player.x,
                    "y": someMapData.player.y
                },
                "css": {
                    "margin-top": someMapData.player.y,
                    "margin-left": someMapData.player.x
                }
            })
                .html('<img src="'+someMapData.player.img+'" alt="'+someMapData.player.name+'" title="'+someMapData.player.name+'" />')
                .appendTo($map);

            if ( typeof someMapData.player.link!="undefined"){
                $player.on("click",function(e){
                    e.preventDefault();
                    document.location=someMapData.player.link;
                });
            }*/


        var spriteMapArray = [],
            count = 0;
        /*
         $(".global-map img").each(function(){

         var $this = $(this),
         tmp = {
         pos     : $this.position(),
         src     : $this.attr("src"),
         count   : count
         };
         //$this.css({"position":"absolute"});
         console.log($this,$this.offset(),$this.position());
         spriteMapArray[count++] = tmp;
         });
         console.log(JSON.stringify(spriteMapArray));
         */
        /*someMapData.player.x = someMapData.player.x+2;
         someMapData.player.y = someMapData.player.y+2;*/
        centerOnMap(someMapData.player);
        showNeedSprites(mapNewArray,$(".global-map"),showAllMap,someMapData.player);
        showPlayersOnMap($map.find(".global-map"));

    }else{

        var showAllMap2 = (typeof showAllMapP=="undefined") ? true : showAllMapP;


        showNeedSprites(mapNewArray,$(".global-map"),showAllMap2,{x:150,y:50});
    }
});


/**
 * @description Центруем карту на нужной координате
 * @param {Object} coords - {x: left, y: top}
 * @param {jQuery Object} $wrapper - контейнер карты $("#map-sprite")
 * @param {jQuery Object} $map - карта
 * @return {Boolean}
 */

var centerOnMap = function(coords/*{x:left,y:top}*/, $wrapper,$map){

    coords = (coords == undefined) ? {x: 10, y: 10} : coords;
    coords.x = (coords.x == undefined) ? 10 : coords.x;
    coords.y = (coords.y == undefined) ? 10 : coords.y;
    $wrapper = ($wrapper == undefined) ? $("#map-sprite") : $wrapper;
    $map = ($map == undefined) ? $(".global-map") : $map;


    var mapW = $map.width(), mapH = $map.height(),
        wrW = $wrapper.width(), wrH = $wrapper.height();

    if (coords.x > wrW/2){
        var mL = (wrW/2 - coords.x) *-1;
        $wrapper.scrollLeft(mL);
    }
    if (coords.y > wrH/2){
        var mT = (wrH/2 - coords.y) *-1;
        $wrapper.scrollTop(mT);
    }

    return true;
};

var showNeedSprites = function(sprites,$map,showAll,coords,$wrapper){


    sprites = (sprites == undefined) ? mapSpritesAr : sprites;
    $map = ($map == undefined) ? $(".global-map") : $map;
    showAll = (showAll == undefined) ? true : showAll;
    $wrapper = ($wrapper == undefined) ? $("#map-sprite") : $wrapper;
    if (!showAll){
        coords = (coords == undefined) ? {x: 10, y: 10} : coords;
        coords.x = (coords.x == undefined) ? 10 : coords.x;
        coords.y = (coords.y == undefined) ? 10 : coords.y;



        var defaultSprite = "/style/img/global-map/321x363.gif",
            mapW = $map.width(), mapH = $map.height(),
            wrW = $wrapper.width(), wrH = $wrapper.height();

        $wrapper.css("overflow","hidden")
    }else{
//        $(".dragger").remove();
        $wrapper.kinetic();
    }


    var arL = sprites.length;

    var y1 = coords.y-wrH/2-200,
        y2 = coords.y+wrH/2+200,
        x1 = coords.x-wrW/2-200,
        x2 = coords.x+wrW/2+200;


    for (var i= 0;i<arL;i++){
        var $this = sprites[i];
        var tmpSrc = "/style/img/global-map/map_"+($this.count+1)+".jpg";
        if (!showAll){
            $this.width = 241;
            $this.height = 224;

            xt = $this.pos.left;
            yt = $this.pos.top;

            xb = $this.pos.left+$this.width;
            yb = $this.pos.top+$this.height;

            xs = $this.pos.left+$this.width/2;
            ys = $this.pos.top+$this.height/2;

            $this.src = defaultSprite;
            if (

                    ((x1 < xt) && (xt < x2) && (y1 < yt) && (yt < y2))
                    ||
                    ((x1 < xt) && (xt < x2) && (y1 < yb) && (yb < y2))
                    ||
                    ((x1 < xb) && (xb < x2) && (y1 < yt) && (yt < y2))
                    ||
                    ((x1 < xb) && (xb < x2) && (y1 < yb) && (yb < y2))
                    ||

                    ((x1 < xt) && (xt < x2) && (y1 < ys) && (ys < y2))
                    ||
                    ((x1 < xb) && (xb < x2) && (y1 < ys) && (ys < y2))
                    ||

                    ((x1 < xs) && (xt < xs) && (y1 < yt) && (yt < y2))
                    ||
                    ((x1 < xs) && (xb < xs) && (y1 < yb) && (yb < y2))


                ){
                $this.src = tmpSrc;
            }

        }else{
            $this.src = tmpSrc;
        }

        var $img = $("<img />",{
            "width": 241,
            "height": 224,
            "src": $this.src,
            "data-oldsrc" : tmpSrc
        });

        $map.append($img);
    }
};

var showPlayersOnMap = function($map){
    if (typeof playersData === "undefined"){
        return false;
    }

    var $playersLayer = $('<div id="player-layer" class="map-layer"></div>').appendTo($map);


    $.each(playersData,function(playerInd,playerData){
        addPlayerMark(playerData,$playersLayer);
    });

    $map.on("click",".player-mark",function(event){
        var $this = $(this),
            $currentList = $this.next();

        if ($this.hasClass("gotomap")){
            document.location="/u/world?x="+$this.data("x")+"&y="+$this.data("y")+'&name='+$this.data('name');
        }else{
            $currentList.toggle().siblings(".player-map-list").hide();

            if ($currentList.is(":visible")){
                $this.css("z-index","103").siblings(".player-mark").css("z-index","101");
                $currentList.css("z-index","102").siblings(".player-map-list").css("z-index",100);
            }else{
                $this.css("z-index","101").siblings(".player-mark").css("z-index","101");
                $currentList.css("z-index","100").siblings(".player-map-list").css("z-index",100);
            }
        }
    })
        .on("click",".player-map-title,.player-map-title-current",function(event){
            document.location = $(this).attr("href");
            return false;
        })
        .on("click",".close-player-map-list",function(){
            var $this = $(this),
                $currentList = $this.parents(".player-map-list"),
                $mart = $currentList.prev();

            $currentList.hide();
            $(".player-mark").css("z-index","101");
            $(".player-map-list").css("z-index",100);
        });



};

var addPlayerMark = function(playerData,$playersLayer){
    var playerClass = "player-map-title",
        $tmpItem = $("<div />",{
        "class": "player-mark",
        "css": {
            "top"       : playerData.pos.y+"px",
            "left"      : playerData.pos.x+"px",
            "position"  : "absolute"
        }
    });
    if (playerData.gotomap){
        $tmpItem.addClass("gotomap").data({
            "x": playerData.pos.x,
            "y": playerData.pos.y,
            "name": playerData.players[0].name
        });
    }
    if (playerData.count==1){
        $tmpItem.append('<img src="'+playerData.players[0].img+'" alt="'+playerData.players[0].name+'" title="'+playerData.players[0].name+'" />');
    }else if (playerData.count<10){
        $tmpItem.text(playerData.count);
    }else{
        $tmpItem.text("~");
    }
    var $playerList = $("<ul />",{
        "class" : "player-map-list",
        "css": {
            "top"       : playerData.pos.y+"px",
            "left"      : playerData.pos.x+"px",
            "position"  : "absolute"
        }
    });
    $.each(playerData.players,function(index,player){
        playerClass = "player-map-title";
        if (player.current){
            playerClass = "player-map-title-current";
            $tmpItem.addClass("current-player-mark");
        }
        var $player = $('<li>' +
            '<a class="'+playerClass+'" href="'+player['href']+'">'+player['name']+'</a>' +
            '<span class="player-map-info">'+player['race']+' '+player['class']+', '+player['lvl']+'</span>' +
            '</li>');
        $playerList.append($player);
    });

    $playerList.find("li:first").append('<span class="close-player-map-list">x</span>');
    $playersLayer.append($tmpItem);
    $playersLayer.append($playerList);
}